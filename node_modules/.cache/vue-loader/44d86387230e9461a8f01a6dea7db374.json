{"remainingRequest":"E:\\article_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\article_vue\\src\\components\\CropperImage.vue?vue&type=style&index=0&id=070cd9fe&scoped=true&lang=scss&","dependencies":[{"path":"E:\\article_vue\\src\\components\\CropperImage.vue","mtime":1619054236014},{"path":"E:\\article_vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\article_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\article_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\article_vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\article_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\article_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNyb3BwZXItY29udGVudHsNCiAgZGlzcGxheTogZmxleDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOw0KICAuY3JvcHBlci1ib3h7DQogICAgZmxleDogMTsNCiAgICB3aWR0aDogMTAwJTsNCiAgICAuY3JvcHBlcnsNCiAgICAgIHdpZHRoOiBhdXRvOw0KICAgICAgaGVpZ2h0OiAzMDBweDsNCiAgICB9DQogIH0NCg0KICAuc2hvdy1wcmV2aWV3ew0KICAgIGZsZXg6IDE7DQogICAgLXdlYmtpdC1mbGV4OiAxOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgIC5wcmV2aWV3ew0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgIGJvcmRlcjoxcHggc29saWQgIzY3YzIzYTsNCiAgICAgIGJhY2tncm91bmQ6ICNjY2NjY2M7DQogICAgfQ0KICB9DQp9DQouZm9vdGVyLWJ0bnsNCiAgbWFyZ2luLXRvcDogMzBweDsNCiAgZGlzcGxheTogZmxleDsNCiAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOw0KICAuc2NvcGUtYnRuew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4Ow0KICB9DQogIC51cGxvYWQtYnRuew0KICAgIGZsZXg6IDE7DQogICAgLXdlYmtpdC1mbGV4OiAxOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZGlzcGxheTogLXdlYmtpdC1mbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICB9DQogIC5idG4gew0KICAgIG91dGxpbmU6IG5vbmU7DQogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgIGxpbmUtaGVpZ2h0OiAxOw0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgb3V0bGluZTogMDsNCiAgICAtd2Via2l0LXRyYW5zaXRpb246IC4xczsNCiAgICB0cmFuc2l0aW9uOiAuMXM7DQogICAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgICBwYWRkaW5nOiA4cHggMTVweDsNCiAgICBmb250LXNpemU6IDEycHg7DQogICAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgIGNvbG9yOiAjZmZmOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDlFRkY7DQogICAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGOw0KICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["CropperImage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CropperImage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"cropper-content\">\r\n    <div class=\"cropper-box\">\r\n      <div class=\"cropper\">\r\n        <vue-cropper\r\n            ref=\"cropper\"\r\n            :img=\"option.img\"\r\n            :outputSize=\"option.outputSize\"\r\n            :outputType=\"option.outputType\"\r\n            :info=\"option.info\"\r\n            :canScale=\"option.canScale\"\r\n            :autoCrop=\"option.autoCrop\"\r\n            :autoCropWidth=\"option.autoCropWidth\"\r\n            :autoCropHeight=\"option.autoCropHeight\"\r\n            :fixed=\"option.fixed\"\r\n            :fixedNumber=\"option.fixedNumber\"\r\n            :full=\"option.full\"\r\n            :fixedBox=\"option.fixedBox\"\r\n            :canMove=\"option.canMove\"\r\n            :canMoveBox=\"option.canMoveBox\"\r\n            :original=\"option.original\"\r\n            :centerBox=\"option.centerBox\"\r\n            :height=\"option.height\"\r\n            :infoTrue=\"option.infoTrue\"\r\n            :maxImgSize=\"option.maxImgSize\"\r\n            :enlarge=\"option.enlarge\"\r\n            :mode=\"option.mode\"\r\n            @realTime=\"realTime\"\r\n            @imgLoad=\"imgLoad\">\r\n        </vue-cropper>\r\n      </div>\r\n      <!--底部操作工具按钮-->\r\n      <div class=\"footer-btn\">\r\n        <div class=\"scope-btn\">\r\n          <label class=\"btn\" for=\"uploads\">选择封面</label>\r\n          <input type=\"file\" id=\"uploads\" style=\"position:absolute; clip:rect(0 0 0 0);\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" @change=\"selectImg($event)\">\r\n          <el-button size=\"mini\" type=\"danger\" plain icon=\"el-icon-zoom-in\" @click=\"changeScale(1)\">放大</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" plain icon=\"el-icon-zoom-out\" @click=\"changeScale(-1)\">缩小</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" plain @click=\"rotateLeft\">↺ 左旋转</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" plain @click=\"rotateRight\">↻ 右旋转</el-button>\r\n        </div>\r\n        <div class=\"upload-btn\">\r\n          <el-button size=\"mini\" type=\"success\" @click=\"uploadImg('blob')\">上传封面 <i class=\"el-icon-upload\"></i></el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--预览效果图-->\r\n    <div class=\"show-preview\">\r\n      <div :style=\"previews.div\" class=\"preview\">\r\n        <img :src=\"previews.url\" :style=\"previews.img\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueCropper from 'vue-cropper'\r\nexport default {\r\n  name: \"CropperImage\",\r\n  components: {\r\n    VueCropper\r\n  },\r\n  props:['Name'],\r\n  data() {\r\n    return {\r\n      name:this.Name,\r\n      previews: {},\r\n      option:{\r\n        img: '',             //裁剪图片的地址\r\n        outputSize: 1,       //裁剪生成图片的质量(可选0.1 - 1)\r\n        outputType: 'jpeg',  //裁剪生成图片的格式（jpeg || png || webp）\r\n        info: true,          //图片大小信息\r\n        canScale: true,      //图片是否允许滚轮缩放\r\n        autoCrop: true,      //是否默认生成截图框\r\n        autoCropWidth: 230,  //默认生成截图框宽度\r\n        autoCropHeight: 150, //默认生成截图框高度\r\n        fixed: true,         //是否开启截图框宽高固定比例\r\n        fixedNumber: [1.53, 1], //截图框的宽高比例\r\n        full: false,         //false按原比例裁切图片，不失真\r\n        fixedBox: true,      //固定截图框大小，不允许改变\r\n        canMove: false,      //上传图片是否可以移动\r\n        canMoveBox: true,    //截图框能否拖动\r\n        original: false,     //上传图片按照原始比例渲染\r\n        centerBox: false,    //截图框是否被限制在图片里面\r\n        height: true,        //是否按照设备的dpr 输出等比例图片\r\n        infoTrue: false,     //true为展示真实输出图片宽高，false展示看到的截图框宽高\r\n        maxImgSize: 3000,    //限制图片最大宽度和高度\r\n        enlarge: 1,          //图片根据截图框输出比例倍数\r\n        mode: '230px 150px'  //图片默认渲染方式\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    //初始化函数\r\n    imgLoad (msg) {\r\n      console.log(\"工具初始化函数=====\"+msg)\r\n    },\r\n    //图片缩放\r\n    changeScale (num) {\r\n      num = num || 1\r\n      this.$refs.cropper.changeScale(num)\r\n    },\r\n    //向左旋转\r\n    rotateLeft () {\r\n      this.$refs.cropper.rotateLeft()\r\n    },\r\n    //向右旋转\r\n    rotateRight () {\r\n      this.$refs.cropper.rotateRight()\r\n    },\r\n    //实时预览函数\r\n    realTime (data) {\r\n      this.previews = data\r\n    },\r\n    //选择图片\r\n    selectImg (e) {\r\n      let file = e.target.files[0]\r\n      if (!/\\.(jpg|jpeg|png|JPG|PNG)$/.test(e.target.value)) {\r\n        this.$message({\r\n          message: '图片类型要求：jpeg、jpg、png',\r\n          type: \"error\"\r\n        });\r\n        return false\r\n      }\r\n      //转化为blob\r\n      let reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        let data\r\n        if (typeof e.target.result === 'object') {\r\n          data = window.URL.createObjectURL(new Blob([e.target.result]))\r\n        } else {\r\n          data = e.target.result\r\n        }\r\n        this.option.img = data\r\n      }\r\n      //转化为base64\r\n      reader.readAsDataURL(file)\r\n    },\r\n    //上传图片\r\n    uploadImg (type) {\r\n      let _this = this;\r\n      if (type === 'blob') {\r\n        //获取截图的blob数据\r\n        this.$refs.cropper.getCropBlob(async (data) => {\r\n          let formData = new FormData();\r\n          formData.append('file',data,\"DX.jpg\")\r\n          //调用axios上传\r\n          let {data: res} = await _this.$http.post('/api/file/imgUpload', formData)\r\n          if(res.code === 200){\r\n            _this.$message({\r\n              message: res.msg,\r\n              type: \"success\"\r\n            });\r\n            let data = res.data.replace('[','').replace(']','').split(',');\r\n            let imgInfo = {\r\n              name : _this.Name,\r\n              url : data[0]\r\n            };\r\n            _this.$emit('uploadImgSuccess',imgInfo);\r\n          }else {\r\n            _this.$message({\r\n              message: '文件服务异常，请联系管理员！',\r\n              type: \"error\"\r\n            });\r\n          }\r\n        })\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.cropper-content{\r\n  display: flex;\r\n  display: -webkit-flex;\r\n  justify-content: flex-end;\r\n  .cropper-box{\r\n    flex: 1;\r\n    width: 100%;\r\n    .cropper{\r\n      width: auto;\r\n      height: 300px;\r\n    }\r\n  }\r\n\r\n  .show-preview{\r\n    flex: 1;\r\n    -webkit-flex: 1;\r\n    display: flex;\r\n    display: -webkit-flex;\r\n    justify-content: center;\r\n    .preview{\r\n      overflow: hidden;\r\n      border:1px solid #67c23a;\r\n      background: #cccccc;\r\n    }\r\n  }\r\n}\r\n.footer-btn{\r\n  margin-top: 30px;\r\n  display: flex;\r\n  display: -webkit-flex;\r\n  justify-content: flex-end;\r\n  .scope-btn{\r\n    display: flex;\r\n    display: -webkit-flex;\r\n    justify-content: space-between;\r\n    padding-right: 10px;\r\n  }\r\n  .upload-btn{\r\n    flex: 1;\r\n    -webkit-flex: 1;\r\n    display: flex;\r\n    display: -webkit-flex;\r\n    justify-content: center;\r\n  }\r\n  .btn {\r\n    outline: none;\r\n    display: inline-block;\r\n    line-height: 1;\r\n    white-space: nowrap;\r\n    cursor: pointer;\r\n    -webkit-appearance: none;\r\n    text-align: center;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n    outline: 0;\r\n    -webkit-transition: .1s;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    padding: 8px 15px;\r\n    font-size: 12px;\r\n    border-radius: 3px;\r\n    color: #fff;\r\n    background-color: #409EFF;\r\n    border-color: #409EFF;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n</style>\r\n\r\n"]}]}